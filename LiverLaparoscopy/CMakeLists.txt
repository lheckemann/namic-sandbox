CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
IF(COMMAND CMAKE_POLICY)
  CMAKE_POLICY(SET CMP0003 NEW)
ENDIF(COMMAND CMAKE_POLICY)

PROJECT(LiverLaparoscopy)

FIND_PACKAGE(ITK REQUIRED)
INCLUDE(${ITK_USE_FILE})

FIND_PACKAGE(VTK REQUIRED)
INCLUDE(${VTK_USE_FILE})

SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin CACHE INTERNAL "Where to put the executables")
SET(LIBRARY_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin CACHE INTERNAL "Where to put the libraries")

IF(NOT ITK_USE_REVIEW)
  MESSAGE(FATAL_ERROR "This projects requires ITK_USE_REVIEW ON, you must reconfigure your ITK build")
ENDIF()

INCLUDE(CTest)

#-----------------------------------------------------------------------------
# Installation and Packaging
SET(CPACK_PACKAGE_NAME "LiverLaparoscopy")
SET(CPACK_PACKAGE_VENDOR "KITWARE Inc.")
SET(CPACK_PACKAGE_VERSION_MAJOR "1")
SET(CPACK_PACKAGE_VERSION_MINOR "2")
SET(CPACK_PACKAGE_VERSION_PATCH "0")
INCLUDE(CPack)


INCLUDE_DIRECTORIES(
  ${PROJECT_SOURCE_DIR}/Source
  )

# Disable MSVC 8 warnings
IF(WIN32)
  OPTION(DISABLE_MSVC8_DEPRECATED_WARNINGS
         "Disable Visual Studio 8 deprecated warnings" ON)
  MARK_AS_ADVANCED(FORCE DISABLE_MSVC8_DEPRECATED_WARNINGS)
  IF(DISABLE_MSVC8_DEPRECATED_WARNINGS)
    ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE)
  ENDIF(DISABLE_MSVC8_DEPRECATED_WARNINGS)
ENDIF(WIN32)

ADD_SUBDIRECTORY( Source )
ADD_SUBDIRECTORY( Testing )
