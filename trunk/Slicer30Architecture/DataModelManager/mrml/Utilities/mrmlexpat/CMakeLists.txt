PROJECT(MRMLEXPAT)
INCLUDE_REGULAR_EXPRESSION("^(expat|xml|ascii|utf|name|iascii|latin|mrml).*$")

SET(expat_SRCS
  xmlparse.c
  xmltok.c
  xmlrole.c
)

INCLUDE_DIRECTORIES(
  ${MRMLEXPAT_SOURCE_DIR}
  )

IF(WIN32)
  IF(NOT BUILD_SHARED_LIBS)
    SET (MRML_EXPAT_STATIC 1)
  ENDIF(NOT BUILD_SHARED_LIBS)
ENDIF(WIN32)

CONFIGURE_FILE(${MRMLEXPAT_SOURCE_DIR}/expatConfig.h.in
               ${MRMLEXPAT_BINARY_DIR}/expatConfig.h)
CONFIGURE_FILE(${MRMLEXPAT_SOURCE_DIR}/expatDllConfig.h.in
               ${MRMLEXPAT_BINARY_DIR}/expatDllConfig.h)
CONFIGURE_FILE(${MRMLEXPAT_SOURCE_DIR}/.NoDartCoverage
               ${MRMLEXPAT_BINARY_DIR}/.NoDartCoverage)

ADD_LIBRARY(mrmlexpat ${expat_SRCS})

# Apply user-defined properties to the library target.
IF(MRML_LIBRARY_PROPERTIES)
  SET_TARGET_PROPERTIES(mrmlexpat PROPERTIES ${MRML_LIBRARY_PROPERTIES})
ENDIF(MRML_LIBRARY_PROPERTIES)

#IF(NOT MRML_INSTALL_NO_LIBRARIES)
#  INSTALL_TARGETS(${MRML_INSTALL_LIB_DIR} mrmlexpat)
#ENDIF(NOT MRML_INSTALL_NO_LIBRARIES)
#IF(NOT MRML_INSTALL_NO_DEVELOPMENT)
#  INSTALL_FILES(${MRML_INSTALL_INCLUDE_DIR}/mrmlexpat .h
#                expat expatDllConfig mrml_expat_mangle)
#ENDIF(NOT MRML_INSTALL_NO_DEVELOPMENT)
