<?xml version="1.0" encoding="utf-8"?>
<executable>
  <category>Filtering</category>
  <title>MRI Bias correction</title>
  <index>3</index>
  <description>Performs MRI bias correction using N3 algorithm.</description>
  <version>0.0</version>
  <documentation-url></documentation-url>
  <license></license>
  <contributor>Nick Tustison (algorithm), Andriy Fedorov (Slicer wrapping)</contributor>
<acknowledgements>
</acknowledgements>

 <parameters advanced="true">
    <label>Processing parameters</label>
    <description>Parameters of N3 algorithm.</description>

    <double>
      <name>shrinkFactor</name>
      <longflag>shrinkfactor</longflag>
      <description></description>
      <label>Shrink factor</label>
      <default>1</default>
    </double>

    <integer>
      <name>nFittingLevels</name>
      <longflag>nfittinglevels</longflag>
      <description></description>
      <label>Number of fitting levels</label>
      <default>40</default>
    </integer>

    <integer>
      <name>nIterations</name>
      <longflag>niterations</longflag>
      <description></description>
      <label>Maximum number of iterations</label>
      <default>50</default>
    </integer>

    <integer>
      <name>nHistogramBins</name>
      <longflag>nhistogrambins</longflag>
      <description></description>
      <label>Number of histogram bins</label>
      <default>200</default>
    </integer>

    <double>
      <name>weinerFilterNoise</name>
      <longflag>weinerfilternoise</longflag>
      <description></description>
      <label>Weiner filter noise</label>
      <default>0.1</default>
    </double>

    <double>
      <name>biasFieldFullWidthAtHalfMaximum</name>
      <longflag>biasfieldfullwidthathalfmaximum</longflag>
      <description></description>
      <label>Bias field full width at half maximum</label>
      <default>0.15</default>
    </double>

    <double>
      <name>convergenceThreshold</name>
      <longflag>convergencethreshold</longflag>
      <description></description>
      <label>Convergence threshold</label>
      <default>0.001</default>
    </double>

    <integer>
      <name>splineOrder</name>
      <longflag>splineorder</longflag>
      <description></description>
      <label>Spline order</label>
      <default>4</default>
    </integer>

    <integer-vector>
      <name>nControlPoints</name>
      <longflag>ncontrolpoints</longflag>
      <description></description>
      <label>Number of control points</label>
      <default>4,4,4</default>
    </integer-vector>

  </parameters>

  <parameters>
    <label>IO</label>
    <description>Input/output parameters</description>
    <image>
      <name>inputImage</name>
      <label>Input Image</label>
      <channel>input</channel>
      <index>0</index>
      <description>Input image with MRI field inhomegeneity</description>
    </image>
    <image>
      <name>maskImageName</name>
      <label>Mask Image</label>
      <channel>input</channel>
      <index>1</index>
      <description>Mask of the structure of interest in the input image</description>
    </image>
    <image>
      <name>outputImage</name>
      <label>Output Volume</label>
      <channel>output</channel>
      <index>2</index>
      <description>Result of processing</description>
    </image>
    <image>
      <name>outputBiasField</name>
      <label>Output bias field image</label>
      <channel>output</channel>
      <index>3</index>
      <description>Recovered bias field</description>
    </image>

  </parameters>

</executable>
