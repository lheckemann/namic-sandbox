# Build a testing suite for Slicer-3
#
PROJECT(BRAINS_SLICER3_TEST_TCL)


MESSAGE(STATUS "Configuring Slicer Tests")

SET(SLICER3_COMMAND_INVOCATION "--no_splash -f")

SET(COMMON_INCLUDE_SCRIPT ${BRAINS_SLICER3_TEST_SUITE_SOURCE_DIR}/Common/BRAINSWrappers.tcl )
SET(COMMON_DATA_DIR ${BRAINS_SLICER3_TEST_SUITE_SOURCE_DIR}/Data )



SET(ALL_TEST_LIST GaussianSmoothAndWrite InvalidFileNameRead ReadNiftiFile )

IF(BRAINS_TESTING_DATA)
   SET(BRAINS_DATA_TEST_LIST ReadManyImages)
   SET(ALL_TEST_LIST ${ALL_TEST_LIST} ${BRAINS_DATA_TEST_LIST})
ENDIF(BRAINS_TESTING_DATA)

FOREACH(SCRIPT_TO_GENERATE ${ALL_TEST_LIST} )
  CONFIGURE_FILE(${BRAINS_SLICER3_TEST_TCL_SOURCE_DIR}/${SCRIPT_TO_GENERATE}.tcl.in ${EXECUTABLE_OUTPUT_PATH}/${SCRIPT_TO_GENERATE}.tcl IMMEDIATE @ONLY )
  ADD_TEST(${SCRIPT_TO_GENERATE}_test  ${SLICER3_BIN} --no_splash -f ${EXECUTABLE_OUTPUT_PATH}/${SCRIPT_TO_GENERATE}.tcl )
ENDFOREACH(SCRIPT_TO_GENERATE)

