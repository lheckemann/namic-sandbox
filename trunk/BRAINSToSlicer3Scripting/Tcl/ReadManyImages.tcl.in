######
# Need to source the BRAINS wrapper scripts.
update
source @COMMON_INCLUDE_SCRIPT@

## Author Hans J. Johnson
## This simple script is causing Slicer to SegmentationFault
## This file can be read in other ITK applications

puts "Executing Commands From @EXECUTABLE_OUTPUT_PATH@/@SCRIPT_TO_GENERATE@.tcl"
puts "Executing Commands From @EXECUTABLE_OUTPUT_PATH@/@SCRIPT_TO_GENERATE@.tcl"
puts "Executing Commands From @EXECUTABLE_OUTPUT_PATH@/@SCRIPT_TO_GENERATE@.tcl"
puts "Executing Commands From @EXECUTABLE_OUTPUT_PATH@/@SCRIPT_TO_GENERATE@.tcl"
puts "Executing Commands From @EXECUTABLE_OUTPUT_PATH@/@SCRIPT_TO_GENERATE@.tcl"

proc TestReadManyImages {} {
  foreach  CurrFile  { SGI/MR/NIfTITypes/Compliant/10_ACPC/char_bigendian.nii.gz SGI/MR/NIfTITypes/Compliant/10_ACPC/char_littleendian.nii.gz SGI/MR/NIfTITypes/Compliant/10_ACPC/float_bigendian.nii.gz SGI/MR/NIfTITypes/Compliant/10_ACPC/float_littleendian.nii.gz SGI/MR/NIfTITypes/Compliant/10_ACPC/signed16_bigendian.nii.gz SGI/MR/NIfTITypes/Compliant/10_ACPC/signed16_littleendian.nii.gz } {
    set fileName @BrainsRegressionData_DATA_PATH@/${CurrFile}
    set inputImage [ b2_load_image ${fileName} ]
    ${inputImage} Delete
  }
}

proc runtest {} {
      set ret [ catch {
                 $::slicer3::Application TraceScript TestReadManyImages
                       } res]

#      set ff [open logger "w"]
#      puts $ff $ret $res
#      close $ff
      if { $ret } {
            puts stderr $res
#            exit -1; #Failure
      }
#      exit 0; #Success
}

update
after idle runtest

