

# Should we use the SOViewer (default is yes)
OPTION(USE_SOV "Use SOViewer" ON)
IF (USE_SOV)
  INCLUDE (${CMAKE_CURRENT_SOURCE_DIR}/FindSOV.cmake)
  IF(USE_SOV_FILE)
    INCLUDE(${USE_SOV_FILE})
  ENDIF(USE_SOV_FILE)
ENDIF(USE_SOV)

# Should we use the FLTK (default is yes)
OPTION(USE_FLTK "Use FLTK library" ON)
IF(USE_FLTK)
  FIND_PACKAGE(FLTK)
  IF(FLTK_FOUND)
    INCLUDE_DIRECTORIES(${FLTK_INCLUDE_DIR})
  ENDIF(FLTK_FOUND)
ENDIF(USE_FLTK)


# lapack needed, assumed to be installed 
SET (LAPACK_LIBRARY_DIR /usr/lib CACHE PATH "Directory with liblapack" FORCE)
IF(WIN32)
    SET(LAPACK_LIBRARIES lapack blas )
ENDIF(WIN32)
IF(CMAKE_SYSTEM MATCHES "Darwin*")
    SET(LAPACK_LIBRARIES lapack   blas I77 F77)
ENDIF(CMAKE_SYSTEM MATCHES "Darwin*")
IF(CMAKE_SYSTEM MATCHES "Sun*")
    SET(LAPACK_LIBRARIES lapack  blas I77 F77 )
ENDIF(CMAKE_SYSTEM MATCHES "Sun*")
IF(CMAKE_SYSTEM MATCHES "Linux*")
    SET(LAPACK_LIBRARIES lapack blas g2c)
ENDIF(CMAKE_SYSTEM MATCHES "Linux*")
LINK_DIRECTORIES(${LAPACK_LIBRARY_DIR})
LINK_LIBRARIES(${LAPACK_LIBRARIES})

# the library stuff
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/IO)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/SpatialObject)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/Algorithms)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/Numerics)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/Optimizer)
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/Lib/SOViewer)

LINK_LIBRARIES(ShapeIO SpatialObject ShapeAlgorithms SpatialObject SparseMatrixLib)

IF (USE_SOV)
  LINK_LIBRARIES(ShapeSOV)
ENDIF(USE_SOV)

SUBDIRS(Lib)

SUBDIRS(GenParaMesh)
SUBDIRS(SegPostProcess)
SUBDIRS(StatNonParamTestPDM)
IF (USE_SOV)
  IF (USE_FLTK)
    SUBDIRS(MeshVisu)
  ENDIF(USE_FLTK)
ENDIF(USE_SOV)

