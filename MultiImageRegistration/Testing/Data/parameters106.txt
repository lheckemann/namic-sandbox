#
# PARAMETERS OF BINARY FILE
#


#
# metricType specifies which objective function to use
# possible options:
#   
#   entropy: congealing with entropy
#   variance: registering to the mean template image using 
#             sum of square differences
    
-metricType entropy


# 
# If useBpline is set off, only affine registration is done, 
# if it is on and useBspline high is off, bspline registration 
# is done with specified grid region. If useBsplineHigh is on
# bspline registration with mesh refinement is performed
#
# Options to use:
#    useBspline on/off
#    useBsplineHigh on/off
#
    
    -useBspline on
    -useBsplineHigh off


#
# All objective functions make use of stochastic subsampline
# following options define the number of spatial samples
# as percentage of the total number of voxels in the image
# (Try to increase the number of samples if the registration
#  accuracy is poor)
#

    -numberOfSpatialSamplesAffinePercentage      0.0050
    -numberOfSpatialSamplesBsplinePercentage     0.0100
    -numberOfSpatialSamplesBsplineHighPercentage 0.0200

#
# following options define number of multiresolution levels used in optimization
# if set to one no multiresolution optimization is performed.
# Affine/Bspline/BsplineHigh define number of multiresolution levels
# used for each registration stage
#
# (For high resolution anatomical images at 256x256x128 voxels
#  we used 3 levels, decrease the number of levels if the
#  resolution of the input image is low )
   
-multiLevelAffine 3
-multiLevelBspline 3
-multiLevelBsplineHigh 3
 
 
 
#
# Following options define the number iterations to be performed
# Optimization is terminated after a fixed number of iterations
# no other termination options are used
#

    -optAffineNumberOfIterations 10
    -optBsplineNumberOfIterations 100
    -optBsplineHighNumberOfIterations 50

 
#
# Following options define the learning rate of the optimizers 
# for each stage of the registration
#
# (decrease the learning rate if you get 
#  "all samples mapped outside" error
#

    -optAffineLearningRate  1e-4
    -optBsplineLearningRate 1e4
    -optBsplineHighLearningrate 1e4
 
 

#
# defines the initial bspline grid size along each dimension
#
    -bsplineInitialGridSize  8
     

#
# When using Bspline grid refinement, this options defines how many number 
# of refinements to use.
# After each level number B-spline control points are doubled (8->16->32)
#

    -numberOfBsplineLevel 2
    


#
# Currently there are three optimizer types. 
# "gradient" is a fixed step gradient descent search. 
# "lineSearch" is gradient descent search where step size is determined using line search.
#
# optimizerType gradient/lineSearch/SPSA/simplex
#
    
-optimizerType lineSearch
    
        
    

   
############################################
#
# ADVANCED OPTIONS
#
############################################

#
#  Specifies the percentage increase in the sampling rate
#  after each multiresolution level
#
    -affineMultiScaleSamplePercentageIncrease 4.0 
    -bsplineMultiScaleSamplePercentageIncrease 4.0
    
    
    
#
#  Specifies increase in the number of iterations  
#  after each resolution level
#
    -affineMultiScaleMaximumIterationIncrease 1.75
    -bsplineMultiScaleMaximumIterationIncrease 1.50
  

#
# Specifies optimizer step length increase after each multiresolution level
#
    -affineMultiScaleStepLengthIncrease 1.0 
    -bsplineMultiScaleStepLengthIncrease 0.25
    


# 
# the level of registration to be started
# Use this option if you want to start the registration 
# using the results of a previous registration
#
# 0 (default): no initialization, all registrations are performed
# 1 : Affine parameters are read from the file
# 2 : Bspline parameters are read from file (initial size should match the transform from file )
# 

-StartLevel 0



#
# Uses a mask on the images. Only pixels inside the mask are considered during the registration
# possible options 
#     mask none/single/all
# none: do not use mask
# single: only use mask for the first image
# all: use mask for all images
#
    -mask none
    
#
# specifies the mask type
# possible options 
#     maskype connectedThreshold/neighborhoodConnected
# connectedThreshold: adds all pixels
#                     to the mask if its value is smaller than threshold1
#                     than add connected pixels whose value is smaller than threshold2
# neighborhoodConnected: same as connectedThreshold but a pixel is added 
#                        only if it is all connected within a radius of one
#
    -maskType connectedThreshold
    -threshold1 0
    -threshold2 1


   
#
# specifies the translation scale coefficients with respect to the affine coefficients
# smaller values mean larger step size along translation directions
# 1/scale is used!

    -translationScaleCoeffs 1e-4
    
    
    
    
#
#  Maximum number of iterations performed for a line search 
#  if the optimizer is lineSearch
#    
    -maximumLineIteration 10
    
    
    
    
#
# the width of the parzen window to compute the entropy
# used by all metric types computing entropy
#
    -parzenWindowStandardDeviation 10
    
