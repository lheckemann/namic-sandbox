<?xml version="1.0" encoding="utf-8"?>
<executable>
  <category>Registration</category>
  <title>Hierarchical Registration</title>
  <description></description>
  <version>0.1</version>
  <documentation-url></documentation-url>
  <license></license>
  <contributor>Andrey Fedorov</contributor>
  <acknowledgements>This module was supported by ...</acknowledgements>

  <parameters advanced="false">

    <label>IO</label>
    <description>Input/output parameters</description>

    <image>
      <name>fixedImageFile</name>
      <longflag>fixedImageFile</longflag>
      <label>Fixed image</label>
      <channel>input</channel>
      <description>Fixed image</description>
      <default></default>
    </image>

    <image>
      <name>movingImageFile</name>
      <longflag>movingImageFile</longflag>
      <label>Moving image</label>
      <channel>input</channel>
      <description>Moving image</description>
      <default></default>
    </image>
    
    <image>
      <name>outputImageFile</name>
      <longflag>outputImageFile</longflag>
      <label>Registered image</label>
      <channel>output</channel>
      <description>Registered image</description>
      <default></default>
    </image>

    <transform fileExtensions=".tfm">
      <name>rigidTransformFile</name>
      <longflag>rigidTransform</longflag>
      <label>Output rigid transform</label>
      <description>Output rigid transform</description>
      <channel>output</channel>
    </transform>

    <transform fileExtensions=".tfm">
      <name>affineTransformFile</name>
      <longflag>affineTransform</longflag>
      <label>Output affine transform</label>
      <description>Output affine transform</description>
      <channel>output</channel>
    </transform>

    <transform fileExtensions=".tfm" type="bspline">
      <name>bsplineTransformFile</name>
      <longflag>bsplineTransform</longflag>
      <label>Output bspline transform</label>
      <description>Output bspline transform</description>
      <channel>output</channel>
    </transform>

  </parameters>

  <parameters advanced="true">

    <label>Parameters</label>
    <description>Registration parameters</description>

    <boolean>
      <name>useExplicitPDFderivatives</name>
      <longflag>useExplicitPDFderivatives</longflag>
      <label>Use explicit PDF derivatives</label>
      <description>Define whether to calculate the metric derivative by explicitly computing the derivatives of the joint PDF with respect to the Transform parameters, or doing it by progressively accumulating contributions from each bin in the joint PDF.</description>
      <default>true</default>
    </boolean>

    <boolean>
      <name>useCachingOfBSplineWeights</name>
      <longflag>useCachingOfBSplineWeights</longflag>
      <label>Use caching of BSpline weights</label>
      <description>Define whether to cache the BSpline weights and indexes corresponding to each one of the samples used to compute the metric. Enabling caching will make the algorithm run faster but it will have a cost on the amount of memory that needs to be allocated. This option is only relevant for BSpline Transform.</description>
      <default>true</default>
    </boolean>

    <integer>
      <name>bsplineGridCoarse</name>
      <longflag>bsplineGridCoarse</longflag>
      <label>Resolution of coarse BSpline grid</label>
      <description></description>
      <default>5</default>
    </integer>

    <integer>
      <name>bsplineGridFine</name>
      <longflag>bsplineGridFine</longflag>
      <label>Resolution of fine BSpline grid</label>
      <description></description>
      <default>20</default>
    </integer>

    <integer>
      <name>bsplineMaxIterations</name>
      <longflag>bsplineMaxIterations</longflag>
      <label>Maximum number of iterations for BSpline registration</label>
      <description></description>
      <default>50</default>
    </integer>

    <float>
      <name>bsplineMaxStepLength</name>
      <longflag>bsplineMaxStepLength</longflag>
      <label>Maximum step length for BSpline registration</label>
      <description></description>
      <default>10.</default>
    </float>

     <integer>
      <name>samplesIntensityThreshold</name>
      <longflag>samplesIntensityThreshold</longflag>
      <label>Intensity threshold</label>
      <description>Intensity values below this will be discarded during registration</description>
      <default>1</default>
    </integer>
   
  </parameters>

</executable>
