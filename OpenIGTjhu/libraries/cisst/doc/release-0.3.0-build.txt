#
# $Id: release-0.3.0-build.txt,v 1.3 2006/02/01 07:41:26 anton Exp $
#
# Anton Deguet
#

Step by step instructions to create the cisst-0.3.0 distribution.  The
distribution is basically a CVS snapshot modified to hide some code
(not ready for prime time) with a compiled documentation.

Release 0.3.0 is dated 2005-09-07.



-1- Create a new directory: mkdir cisst-0_3_0; cd cisst-0_3_0 (make
    sure you don't have a . in the path name, latex2html doesn't like
    it).

-2- Checkout latest version: cvs co .

-3- Tag the latest version: cvs -q tag -b release-0_3_0
                            cvs update -r release-0_3_0

-4- Remove parts no included in the distribution:

rm -rf apps
rm -rf cnetlib
rm -rf libs/utils/netlib
rm -rf libs/include/cisstDeviceInterface
rm -rf libs/include/cisstOSAbstraction
rm -rf libs/include/cisstTracker
rm -rf libs/include/cisstRealTime
rm -rf libs/code/cisstDeviceInterface
rm -rf libs/code/cisstOSAbstraction
rm -rf libs/code/cisstTracker
rm -rf libs/code/cisstRealTime
rm -rf tests/cisstDeviceInterface
rm -rf tests/cisstRealTime
rm -rf examples/controlThreadFLTK
rm -rf examples/deviceTutorial
rm -rf examples/MEI_ATIDAQFTTest
rm -rf examples/nmrNonLinExample
rm -rf examples/realtimeTutorial
rm -rf examples/serialPort
rm -rf examples/simpleThreads
rm -rf examples/tclEmbedded
rm -rf examples/trajectoryThread
rm -rf examples/vectorSVD
rm -rf examples/vectorVnlSVD
rm -rf examples/XPathConfig
rm -f libs/include/cisstCommon/cmnDataObject.h
rm -f libs/include/cisstCommon/cmnXMLPath.h
rm -f libs/code/cisstCommon/cmnDataObject.cpp
rm -f libs/code/cisstCommon/cmnXMLPath.cpp
rm -f libs/include/cisstNumerical/nmr*Polynomial*.h
rm -f libs/include/cisstNumerical/nmrMulti*.h
rm -f libs/include/cisstNumerical/nmrSingleVariablePowerBasis.h
rm -f libs/include/cisstNumerical/nmrLSqLin.h
rm -f libs/code/cisstNumerical/nmr*Polynomial*.cpp
rm -f libs/code/cisstNumerical/nmrMulti*.cpp
rm -f libs/code/cisstNumerical/nmrSingleVariablePowerBasis.cpp
rm -f libs/include/cisstNumerical/nmrLSqLin.cpp
rm -f tests/cisstNumerical/*Polynomial*.{h,cpp}
rm -f tests/cisstNumerical/nmrMultiIndexCounterTest.{h,cpp}
rm -f tests/cisstNumerical/nmrLSqLinTest.{h,cpp}


-5- Update CMakeLists across the repository to reflect the deleted
    files but keep the documentation build.

-6- Build the libraries, tests, examples.

-7- Build the documentation.  Set the INSTALL_PREFIX to /usr/tmp. Edit
    the doc/index.html and doc/doxygen/main.dox.

-8- Create a new directory to be tar-gzipped as a copy of the current
    directory.
    mkdir cisst-0.3.0
    cp -r CMakeLists.txt DartConfig.cmake examples/ libs/ tests/ cisst-0.3.0/

    Comment out the "BUILD_DOC" option in main cisst-0.3.0/CMakeLists.

    In this directory, remove all the CVS* files/directories:
    find cisst-0.3.0 -name "CVS*" -exec rm -rf {} \;
    find cisst-0.3.0 -name "*~" -exec rm {} \;

    Copy the build documentation in this directory:
    cp -r /usr/tmp/share/cisst/doc cisst-0.3.0/

-9- Create the tar.gz and zip files:
    tar zcvf cisst-0.3.0.tgz cisst-0.3.0/{CMakeLists.txt,DartConfig.cmake,examples,libs,tests}
    tar zcvf cisst-0.3.0-doc.tgz cisst-0.3.0/doc
    zip -r cisst-0.3.0.zip cisst-0.3.0/{CMakeLists.txt,DartConfig.cmake,examples,libs,tests}
    zip -r cisst-0.3.0-doc.zip cisst-0.3.0/doc

-10- Create a tree to copy on the web:
     mkdir www
     mkdir www/cisst-0.3.0
     mv *.tgz *.zip www/cisst-0.3.0
     cp -r cisst-0.3.0/doc www/cisst-0.3.0

-11- Copy this tree on the web server and update the index.shtml in resources/software
     cd www
     scp -r cisst-0.3.0/ root@cisstweb:/home/cisstweb/htdocs/resources/software/downloads/cisst
