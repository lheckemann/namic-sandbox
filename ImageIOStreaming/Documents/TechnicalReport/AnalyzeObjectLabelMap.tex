%
% Complete documentation on the extended LaTeX markup used for Insight
% documentation is available in ``Documenting Insight'', which is part
% of the standard documentation for Insight.  It may be found online
% at:
%
%     http://www.itk.org/

\documentclass{InsightArticle}

\usepackage[dvips]{graphicx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  hyperref should be the last package to be loaded.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[dvips,
bookmarks,
bookmarksopen,
backref,
colorlinks,linkcolor={blue},citecolor={blue},urlcolor={blue},
]{hyperref}


%  This is a template for Papers to the Insight Journal. 
%  It is comparable to a technical report format.
\title{Reader/Writer for Analyze Object Maps for ITK}

% Increment the release number whenever significant changes are made.
% The author and/or editor can define 'significant' however they like.
\release{1.00}

% At minimum, give your name and an email address.  You can include a
% snail-mail address if you like.
\author{Jeffrey Hawley, Hans Johnson }
\authoraddress{University of Iowa}

\begin{document}


\ifpdf
\else
   %
   % Commands for including Graphics when using latex
   % 
   \DeclareGraphicsExtensions{.eps,.jpg,.gif,.tiff,.bmp,.png}
   \DeclareGraphicsRule{.jpg}{eps}{.jpg.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.gif}{eps}{.gif.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.tiff}{eps}{.tiff.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.bmp}{eps}{.bmp.bb}{`convert #1 eps:-}
   \DeclareGraphicsRule{.png}{eps}{.png.bb}{`convert #1 eps:-}
\fi


\maketitle


\ifhtml
\chapter*{Front Matter\label{front}}
\fi


% The abstract should be a paragraph or two long, and describe the
% scope of the document.
\begin{abstract}
\noindent
This document describes an addition to the Image IO Library of the Insight Toolkit (ITK).
ITK has been able to read in Anaylze image files but not the object maps that correspond
to the images.  Without the object maps, regions of interest were not being shown.
These regions of interest are helpful in desginating locations, giving a name to those
locations, as well as colors and other informatoin, which is useful if you are trying to tell
someone where to look in an image.  This report describes the reason why this code should be
added into ITK and how to use the code.
\end{abstract}

\tableofcontents

\section{Description}
There are two utility files (objectmap and objectentry) and the main IO file (itkAnalyzeObjectLabelMapImageIO) and the corresponding
IO factory file (itkAnalyzeObjectLabelMapImageIOFactory).  The IO file takes care of reading and writing out an object file.  Whenever
you read or write an object file you have at the very beginning information about the object map.  The very first data is the version
of the object map, next you have the x,y,z size of the object map, the number of object entries and finally for version 7 (the newest
version) number of volumes.  After you have the beginning information there is the information about each object file, that means that
there is going to have to be a vector of all of the entries.  That is why there is a utility file called objectentry that stores the
information for one specific entry, if you make a vector of the file then you have all of the object entries for an object map.  There
are also some other functions in the objectentry that will read or write the information for the object entry.

\section{Analyze Object Maps}

WHAT ARE OBJECT MAPS?  AFTER THAT, WHY ARE THEY USEFUL?

An Analyze object map is a series of user specified regions.  Each region that is specfied has a name, a specific red, green, and blue (RGB) color, a display flag determining wether the region should be shown or not and other information about what was done with the region.  With each region
specified there is a new image that is created that is just of the background and each region that is specified.  This image is written to a file by run length encoding it.



\section{Examples}

This section provides some examples on how to use the programs.
\begin{itemize}
\item Example 1 

This example is for reading in any file, then creating a new object map,
then add entries to the object map and then finally write the object map out to a file.

Command:

\textbf{AnalyzeObjectExample2.exe 2dtest.nii creatingObject.obj}


\begin{figure}[h]
  \hfill
  \begin{minipage}[t]{.45\textwidth}
    \begin{center}  
      \includegraphics[width=.5\textwidth]{2dtest.eps}
      \caption{2dtest.nii}
      \label{fig-tc}
    \end{center}
  \end{minipage}
  \hfill
  \begin{minipage}[t]{.45\textwidth}
    \begin{center}  
      \includegraphics[width=.5\textwidth]{creatingObject.eps}
      \caption{creatingObject.obj, this is what it should look like when you convert it to an RGB image.  See next example on how to display 
    object maps.}
      \label{fig-tc}
    \end{center}
  \end{minipage}
  \hfill
\end{figure}
  

\item Example 2


This example is for reading in an Analyze object map and
then use vtk to display the object map.  The user will need ITK,
Insight Applications (for itkImageToVTKImageFilter), and VTK.

Command:

\textbf{AnalyzeObjectExample1.exe test.obj 0}

\item Example 3

This example is for reading in any file, then creating a new object map, then add entries to the object map, pick one entry and then write out the new object map with the one entry only.

Command:

\textbf{AnalyzeObjectExample2.exe 2dtest.nii creatingObjectTwo.obj}

\begin{figure}[h]
\center
\includegraphics[width=.25\textwidth]{creatingObjectTwo.eps}
\itkcaption[Streaming Concept Diagram]{creatingObjectTwo.obj, this is what it should look like when it is converted to an RGB image.  Also, see the first example to see what 2dtest.nii should look like.}
\label{fig:StreamingConceptDiagram}
\end{figure}
\end{itemize}

\section{Testing}

Right now we have one test that tests a lot of the code.  The filename for the test is 



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%  Insert the bibliography using BibTeX
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\bibliographystyle{plain}
\bibliography{InsightJournal}


\end{document}

